{"id":"o8wU","dependencies":[{"name":"/home/shy/code/puemos/hls-downloader-chrome-extension/.babelrc","includedInParent":true,"mtime":1552234699080},{"name":"/home/shy/code/puemos/hls-downloader-chrome-extension/package.json","includedInParent":true,"mtime":1578255291486}],"generated":{"js":"\"use strict\";async function e({getSegmentURI:e,key:r,chunkURI:a}){const n=await fetch(e(e(a))).then(e=>e.arrayBuffer());if(r){const a=await t({keyDataURI:e(r.uri),arrayBuffer:n,key:r});return new Blob([new Uint8Array(a)])}return new Blob([new Uint8Array(n)])}async function t({keyDataURI:e,arrayBuffer:t,key:r}){const a=await fetch(e).then(e=>e.arrayBuffer()),n=await crypto.subtle.importKey(\"raw\",a,\"aes-cbc\",!1,[\"decrypt\"]);return await crypto.subtle.decrypt({name:\"aes-cbc\",iv:r.iv},n,t)}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.downloadChunk=e;"},"sourceMaps":{"js":{"mappings":[{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":34,"column":1},"generated":{"line":1,"column":0}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":1,"column":7},"generated":{"line":1,"column":13}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"downloadChunk","original":{"line":1,"column":22},"generated":{"line":1,"column":28}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":1,"column":36},"generated":{"line":1,"column":31}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"getSegmentURI","original":{"line":1,"column":38},"generated":{"line":1,"column":45}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":1,"column":36},"generated":{"line":1,"column":47}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"key","original":{"line":1,"column":53},"generated":{"line":1,"column":51}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":1,"column":36},"generated":{"line":1,"column":53}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"chunkURI","original":{"line":1,"column":58},"generated":{"line":1,"column":62}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"arrayBuffer","original":{"line":2,"column":8},"generated":{"line":1,"column":66}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"arrayBuffer","original":{"line":2,"column":8},"generated":{"line":1,"column":72}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"fetch","original":{"line":2,"column":28},"generated":{"line":1,"column":80}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"getSegmentURI","original":{"line":2,"column":34},"generated":{"line":1,"column":86}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"getSegmentURI","original":{"line":2,"column":48},"generated":{"line":1,"column":88}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"chunkURI","original":{"line":2,"column":62},"generated":{"line":1,"column":90}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"then","original":{"line":2,"column":74},"generated":{"line":1,"column":95}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"res","original":{"line":3,"column":4},"generated":{"line":1,"column":100}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"res","original":{"line":3,"column":11},"generated":{"line":1,"column":103}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"arrayBuffer","original":{"line":3,"column":15},"generated":{"line":1,"column":105}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"key","original":{"line":5,"column":6},"generated":{"line":1,"column":120}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"key","original":{"line":5,"column":6},"generated":{"line":1,"column":123}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":5,"column":11},"generated":{"line":1,"column":125}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"decryptData","original":{"line":6,"column":10},"generated":{"line":1,"column":126}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"decryptData","original":{"line":6,"column":10},"generated":{"line":1,"column":132}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"decryptChunk","original":{"line":6,"column":30},"generated":{"line":1,"column":140}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":6,"column":43},"generated":{"line":1,"column":142}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"keyDataURI","original":{"line":7,"column":6},"generated":{"line":1,"column":143}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"getSegmentURI","original":{"line":7,"column":18},"generated":{"line":1,"column":154}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"key","original":{"line":7,"column":32},"generated":{"line":1,"column":156}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"uri","original":{"line":7,"column":36},"generated":{"line":1,"column":158}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"arrayBuffer","original":{"line":8,"column":6},"generated":{"line":1,"column":163}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"arrayBuffer","original":{"line":8,"column":6},"generated":{"line":1,"column":175}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"key","original":{"line":9,"column":6},"generated":{"line":1,"column":177}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"key","original":{"line":9,"column":6},"generated":{"line":1,"column":181}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":11,"column":11},"generated":{"line":1,"column":185}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":11,"column":11},"generated":{"line":1,"column":192}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"Blob","original":{"line":11,"column":15},"generated":{"line":1,"column":196}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":11,"column":20},"generated":{"line":1,"column":201}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":11,"column":21},"generated":{"line":1,"column":202}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"Uint8Array","original":{"line":11,"column":25},"generated":{"line":1,"column":206}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"decryptData","original":{"line":11,"column":36},"generated":{"line":1,"column":217}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":13,"column":9},"generated":{"line":1,"column":222}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":13,"column":9},"generated":{"line":1,"column":229}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"Blob","original":{"line":13,"column":13},"generated":{"line":1,"column":233}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":13,"column":18},"generated":{"line":1,"column":238}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":13,"column":19},"generated":{"line":1,"column":239}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"Uint8Array","original":{"line":13,"column":23},"generated":{"line":1,"column":243}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"arrayBuffer","original":{"line":13,"column":34},"generated":{"line":1,"column":254}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":16,"column":0},"generated":{"line":1,"column":259}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"decryptChunk","original":{"line":16,"column":15},"generated":{"line":1,"column":274}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":16,"column":28},"generated":{"line":1,"column":277}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"keyDataURI","original":{"line":16,"column":30},"generated":{"line":1,"column":288}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":16,"column":28},"generated":{"line":1,"column":290}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"arrayBuffer","original":{"line":16,"column":42},"generated":{"line":1,"column":302}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":16,"column":28},"generated":{"line":1,"column":304}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"key","original":{"line":16,"column":55},"generated":{"line":1,"column":308}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"keyData","original":{"line":17,"column":8},"generated":{"line":1,"column":312}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"keyData","original":{"line":17,"column":8},"generated":{"line":1,"column":318}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"fetch","original":{"line":17,"column":24},"generated":{"line":1,"column":326}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"keyDataURI","original":{"line":17,"column":30},"generated":{"line":1,"column":332}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"then","original":{"line":17,"column":42},"generated":{"line":1,"column":335}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"res","original":{"line":17,"column":47},"generated":{"line":1,"column":340}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"res","original":{"line":17,"column":54},"generated":{"line":1,"column":343}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"arrayBuffer","original":{"line":17,"column":58},"generated":{"line":1,"column":345}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"rawKey","original":{"line":18,"column":8},"generated":{"line":1,"column":360}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"crypto","original":{"line":18,"column":23},"generated":{"line":1,"column":368}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"subtle","original":{"line":18,"column":30},"generated":{"line":1,"column":375}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"importKey","original":{"line":18,"column":37},"generated":{"line":1,"column":382}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":19,"column":4},"generated":{"line":1,"column":392}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"keyData","original":{"line":20,"column":4},"generated":{"line":1,"column":398}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":21,"column":4},"generated":{"line":1,"column":400}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":22,"column":4},"generated":{"line":1,"column":411}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":23,"column":4},"generated":{"line":1,"column":413}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":23,"column":5},"generated":{"line":1,"column":414}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"decryptData","original":{"line":33,"column":9},"generated":{"line":1,"column":426}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"crypto","original":{"line":25,"column":28},"generated":{"line":1,"column":439}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"subtle","original":{"line":25,"column":35},"generated":{"line":1,"column":446}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"decrypt","original":{"line":25,"column":42},"generated":{"line":1,"column":453}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":26,"column":4},"generated":{"line":1,"column":461}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"name","original":{"line":27,"column":6},"generated":{"line":1,"column":462}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":27,"column":12},"generated":{"line":1,"column":467}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"iv","original":{"line":28,"column":6},"generated":{"line":1,"column":477}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"key","original":{"line":28,"column":10},"generated":{"line":1,"column":480}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"iv","original":{"line":28,"column":14},"generated":{"line":1,"column":482}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"rawKey","original":{"line":30,"column":4},"generated":{"line":1,"column":486}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"arrayBuffer","original":{"line":31,"column":4},"generated":{"line":1,"column":488}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":34,"column":1},"generated":{"line":1,"column":491}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":34,"column":1},"generated":{"line":1,"column":498}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":34,"column":1},"generated":{"line":1,"column":513}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":34,"column":1},"generated":{"line":1,"column":521}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":34,"column":1},"generated":{"line":1,"column":534}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":34,"column":1},"generated":{"line":1,"column":535}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":34,"column":1},"generated":{"line":1,"column":542}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":34,"column":1},"generated":{"line":1,"column":546}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":34,"column":1},"generated":{"line":1,"column":554}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":34,"column":1},"generated":{"line":1,"column":568}}],"sources":{"../modules/downloads/sagas/downloadChunk.js":"export async function downloadChunk({ getSegmentURI, key, chunkURI }) {\n  const arrayBuffer = await fetch(getSegmentURI(getSegmentURI(chunkURI))).then(\n    res => res.arrayBuffer()\n  );\n  if (key) {\n    const decryptData = await decryptChunk({\n      keyDataURI: getSegmentURI(key.uri),\n      arrayBuffer,\n      key\n    });\n    return new Blob([new Uint8Array(decryptData)]);\n  }\n  return new Blob([new Uint8Array(arrayBuffer)]);\n}\n\nasync function decryptChunk({ keyDataURI, arrayBuffer, key }) {\n  const keyData = await fetch(keyDataURI).then(res => res.arrayBuffer());\n  const rawKey = await crypto.subtle.importKey(\n    \"raw\",\n    keyData,\n    \"aes-cbc\",\n    false,\n    [\"decrypt\"]\n  );\n  const decryptData = await crypto.subtle.decrypt(\n    {\n      name: \"aes-cbc\",\n      iv: key.iv\n    },\n    rawKey,\n    arrayBuffer\n  );\n  return decryptData;\n}\n"},"lineCount":null}},"error":null,"hash":"edf2207f9cfb56517560b4b3916042ab","cacheData":{"env":{}}}
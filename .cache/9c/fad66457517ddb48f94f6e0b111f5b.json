{"id":"o8wU","dependencies":[{"name":"/home/shy/code/puemos/hls-downloader-chrome-extension/.babelrc","includedInParent":true,"mtime":1552234699080},{"name":"/home/shy/code/puemos/hls-downloader-chrome-extension/package.json","includedInParent":true,"mtime":1578255291486}],"generated":{"js":"\"use strict\";async function e({getSegmentURI:e,key:r,chunkURI:a}){console.log(\"454\",e(a));const n=await fetch(e(a)).then(e=>e.arrayBuffer());if(r){const a=await t({keyDataURI:e(r.uri),arrayBuffer:n,key:r});return new Blob([new Uint8Array(a)])}return new Blob([new Uint8Array(n)])}async function t({keyDataURI:e,arrayBuffer:t,key:r}){const a=await fetch(e).then(e=>e.arrayBuffer()),n=await crypto.subtle.importKey(\"raw\",a,\"aes-cbc\",!1,[\"decrypt\"]);return await crypto.subtle.decrypt({name:\"aes-cbc\",iv:r.iv},n,t)}Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.downloadChunk=e;"},"sourceMaps":{"js":{"mappings":[{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":36,"column":1},"generated":{"line":1,"column":0}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":1,"column":7},"generated":{"line":1,"column":13}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"downloadChunk","original":{"line":1,"column":22},"generated":{"line":1,"column":28}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":1,"column":36},"generated":{"line":1,"column":31}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"getSegmentURI","original":{"line":1,"column":38},"generated":{"line":1,"column":45}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":1,"column":36},"generated":{"line":1,"column":47}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"key","original":{"line":1,"column":53},"generated":{"line":1,"column":51}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":1,"column":36},"generated":{"line":1,"column":53}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"chunkURI","original":{"line":1,"column":58},"generated":{"line":1,"column":62}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"console","original":{"line":2,"column":2},"generated":{"line":1,"column":66}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"log","original":{"line":2,"column":10},"generated":{"line":1,"column":74}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":2,"column":14},"generated":{"line":1,"column":78}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"getSegmentURI","original":{"line":2,"column":21},"generated":{"line":1,"column":84}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"chunkURI","original":{"line":2,"column":35},"generated":{"line":1,"column":86}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"arrayBuffer","original":{"line":4,"column":8},"generated":{"line":1,"column":90}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"arrayBuffer","original":{"line":4,"column":8},"generated":{"line":1,"column":96}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"fetch","original":{"line":4,"column":28},"generated":{"line":1,"column":104}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"getSegmentURI","original":{"line":4,"column":34},"generated":{"line":1,"column":110}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"chunkURI","original":{"line":4,"column":48},"generated":{"line":1,"column":112}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"then","original":{"line":4,"column":59},"generated":{"line":1,"column":116}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"res","original":{"line":4,"column":64},"generated":{"line":1,"column":121}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"res","original":{"line":5,"column":4},"generated":{"line":1,"column":124}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"arrayBuffer","original":{"line":5,"column":8},"generated":{"line":1,"column":126}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"key","original":{"line":7,"column":6},"generated":{"line":1,"column":141}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"key","original":{"line":7,"column":6},"generated":{"line":1,"column":144}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":7,"column":11},"generated":{"line":1,"column":146}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"decryptData","original":{"line":8,"column":10},"generated":{"line":1,"column":147}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"decryptData","original":{"line":8,"column":10},"generated":{"line":1,"column":153}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"decryptChunk","original":{"line":8,"column":30},"generated":{"line":1,"column":161}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":8,"column":43},"generated":{"line":1,"column":163}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"keyDataURI","original":{"line":9,"column":6},"generated":{"line":1,"column":164}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"getSegmentURI","original":{"line":9,"column":18},"generated":{"line":1,"column":175}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"key","original":{"line":9,"column":32},"generated":{"line":1,"column":177}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"uri","original":{"line":9,"column":36},"generated":{"line":1,"column":179}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"arrayBuffer","original":{"line":10,"column":6},"generated":{"line":1,"column":184}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"arrayBuffer","original":{"line":10,"column":6},"generated":{"line":1,"column":196}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"key","original":{"line":11,"column":6},"generated":{"line":1,"column":198}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"key","original":{"line":11,"column":6},"generated":{"line":1,"column":202}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":13,"column":11},"generated":{"line":1,"column":206}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":13,"column":11},"generated":{"line":1,"column":213}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"Blob","original":{"line":13,"column":15},"generated":{"line":1,"column":217}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":13,"column":20},"generated":{"line":1,"column":222}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":13,"column":21},"generated":{"line":1,"column":223}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"Uint8Array","original":{"line":13,"column":25},"generated":{"line":1,"column":227}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"decryptData","original":{"line":13,"column":36},"generated":{"line":1,"column":238}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":15,"column":9},"generated":{"line":1,"column":243}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":15,"column":9},"generated":{"line":1,"column":250}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"Blob","original":{"line":15,"column":13},"generated":{"line":1,"column":254}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":15,"column":18},"generated":{"line":1,"column":259}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":15,"column":19},"generated":{"line":1,"column":260}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"Uint8Array","original":{"line":15,"column":23},"generated":{"line":1,"column":264}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"arrayBuffer","original":{"line":15,"column":34},"generated":{"line":1,"column":275}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":18,"column":0},"generated":{"line":1,"column":280}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"decryptChunk","original":{"line":18,"column":15},"generated":{"line":1,"column":295}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":18,"column":28},"generated":{"line":1,"column":298}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"keyDataURI","original":{"line":18,"column":30},"generated":{"line":1,"column":309}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":18,"column":28},"generated":{"line":1,"column":311}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"arrayBuffer","original":{"line":18,"column":42},"generated":{"line":1,"column":323}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":18,"column":28},"generated":{"line":1,"column":325}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"key","original":{"line":18,"column":55},"generated":{"line":1,"column":329}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"keyData","original":{"line":19,"column":8},"generated":{"line":1,"column":333}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"keyData","original":{"line":19,"column":8},"generated":{"line":1,"column":339}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"fetch","original":{"line":19,"column":24},"generated":{"line":1,"column":347}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"keyDataURI","original":{"line":19,"column":30},"generated":{"line":1,"column":353}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"then","original":{"line":19,"column":42},"generated":{"line":1,"column":356}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"res","original":{"line":19,"column":47},"generated":{"line":1,"column":361}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"res","original":{"line":19,"column":54},"generated":{"line":1,"column":364}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"arrayBuffer","original":{"line":19,"column":58},"generated":{"line":1,"column":366}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"rawKey","original":{"line":20,"column":8},"generated":{"line":1,"column":381}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"crypto","original":{"line":20,"column":23},"generated":{"line":1,"column":389}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"subtle","original":{"line":20,"column":30},"generated":{"line":1,"column":396}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"importKey","original":{"line":20,"column":37},"generated":{"line":1,"column":403}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":21,"column":4},"generated":{"line":1,"column":413}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"keyData","original":{"line":22,"column":4},"generated":{"line":1,"column":419}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":23,"column":4},"generated":{"line":1,"column":421}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":24,"column":4},"generated":{"line":1,"column":432}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":25,"column":4},"generated":{"line":1,"column":434}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":25,"column":5},"generated":{"line":1,"column":435}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"decryptData","original":{"line":35,"column":9},"generated":{"line":1,"column":447}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"crypto","original":{"line":27,"column":28},"generated":{"line":1,"column":460}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"subtle","original":{"line":27,"column":35},"generated":{"line":1,"column":467}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"decrypt","original":{"line":27,"column":42},"generated":{"line":1,"column":474}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":28,"column":4},"generated":{"line":1,"column":482}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"name","original":{"line":29,"column":6},"generated":{"line":1,"column":483}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":29,"column":12},"generated":{"line":1,"column":488}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"iv","original":{"line":30,"column":6},"generated":{"line":1,"column":498}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"key","original":{"line":30,"column":10},"generated":{"line":1,"column":501}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"iv","original":{"line":30,"column":14},"generated":{"line":1,"column":503}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"rawKey","original":{"line":32,"column":4},"generated":{"line":1,"column":507}},{"source":"../modules/downloads/sagas/downloadChunk.js","name":"arrayBuffer","original":{"line":33,"column":4},"generated":{"line":1,"column":509}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":36,"column":1},"generated":{"line":1,"column":512}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":36,"column":1},"generated":{"line":1,"column":519}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":36,"column":1},"generated":{"line":1,"column":534}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":36,"column":1},"generated":{"line":1,"column":542}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":36,"column":1},"generated":{"line":1,"column":555}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":36,"column":1},"generated":{"line":1,"column":556}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":36,"column":1},"generated":{"line":1,"column":563}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":36,"column":1},"generated":{"line":1,"column":567}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":36,"column":1},"generated":{"line":1,"column":575}},{"source":"../modules/downloads/sagas/downloadChunk.js","original":{"line":36,"column":1},"generated":{"line":1,"column":589}}],"sources":{"../modules/downloads/sagas/downloadChunk.js":"export async function downloadChunk({ getSegmentURI, key, chunkURI }) {\n  console.log(\"454\", getSegmentURI(chunkURI));\n\n  const arrayBuffer = await fetch(getSegmentURI(chunkURI)).then(res =>\n    res.arrayBuffer()\n  );\n  if (key) {\n    const decryptData = await decryptChunk({\n      keyDataURI: getSegmentURI(key.uri),\n      arrayBuffer,\n      key\n    });\n    return new Blob([new Uint8Array(decryptData)]);\n  }\n  return new Blob([new Uint8Array(arrayBuffer)]);\n}\n\nasync function decryptChunk({ keyDataURI, arrayBuffer, key }) {\n  const keyData = await fetch(keyDataURI).then(res => res.arrayBuffer());\n  const rawKey = await crypto.subtle.importKey(\n    \"raw\",\n    keyData,\n    \"aes-cbc\",\n    false,\n    [\"decrypt\"]\n  );\n  const decryptData = await crypto.subtle.decrypt(\n    {\n      name: \"aes-cbc\",\n      iv: key.iv\n    },\n    rawKey,\n    arrayBuffer\n  );\n  return decryptData;\n}\n"},"lineCount":null}},"error":null,"hash":"a79324c3733342fa39d7652f96a7e24f","cacheData":{"env":{}}}
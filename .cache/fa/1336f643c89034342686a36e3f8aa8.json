{"id":"aHi1","dependencies":[{"name":"/home/shy/code/puemos/hls-downloader-chrome-extension/.babelrc","includedInParent":true,"mtime":1552234699080},{"name":"/home/shy/code/puemos/hls-downloader-chrome-extension/package.json","includedInParent":true,"mtime":1578255291486},{"name":"ramda","loc":{"line":1,"column":19},"parent":"/home/shy/code/puemos/hls-downloader-chrome-extension/src/modules/downloads/sagas/index.js","resolved":"/home/shy/code/puemos/hls-downloader-chrome-extension/node_modules/ramda/es/index.js"},{"name":"redux-saga","loc":{"line":2,"column":24},"parent":"/home/shy/code/puemos/hls-downloader-chrome-extension/src/modules/downloads/sagas/index.js","resolved":"/home/shy/code/puemos/hls-downloader-chrome-extension/node_modules/redux-saga/es/index.js"},{"name":"redux-saga/effects","loc":{"line":12,"column":7},"parent":"/home/shy/code/puemos/hls-downloader-chrome-extension/src/modules/downloads/sagas/index.js","resolved":"/home/shy/code/puemos/hls-downloader-chrome-extension/node_modules/redux-saga/es/effects.js"},{"name":"uuid","loc":{"line":13,"column":17},"parent":"/home/shy/code/puemos/hls-downloader-chrome-extension/src/modules/downloads/sagas/index.js","resolved":"/home/shy/code/puemos/hls-downloader-chrome-extension/node_modules/uuid/index.js"},{"name":"../../../background/Parser","loc":{"line":14,"column":30},"parent":"/home/shy/code/puemos/hls-downloader-chrome-extension/src/modules/downloads/sagas/index.js","resolved":"/home/shy/code/puemos/hls-downloader-chrome-extension/src/background/Parser.js"},{"name":"../action-creators","loc":{"line":20,"column":7},"parent":"/home/shy/code/puemos/hls-downloader-chrome-extension/src/modules/downloads/sagas/index.js","resolved":"/home/shy/code/puemos/hls-downloader-chrome-extension/src/modules/downloads/action-creators.js"},{"name":"../action-types","loc":{"line":21,"column":51},"parent":"/home/shy/code/puemos/hls-downloader-chrome-extension/src/modules/downloads/sagas/index.js","resolved":"/home/shy/code/puemos/hls-downloader-chrome-extension/src/modules/downloads/action-types.js"},{"name":"../utils","loc":{"line":22,"column":36},"parent":"/home/shy/code/puemos/hls-downloader-chrome-extension/src/modules/downloads/sagas/index.js","resolved":"/home/shy/code/puemos/hls-downloader-chrome-extension/src/modules/downloads/utils.js"},{"name":"./downloadChunk","loc":{"line":23,"column":30},"parent":"/home/shy/code/puemos/hls-downloader-chrome-extension/src/modules/downloads/sagas/index.js","resolved":"/home/shy/code/puemos/hls-downloader-chrome-extension/src/modules/downloads/sagas/downloadChunk.js"},{"name":"./queue","loc":{"line":24,"column":24},"parent":"/home/shy/code/puemos/hls-downloader-chrome-extension/src/modules/downloads/sagas/index.js","resolved":"/home/shy/code/puemos/hls-downloader-chrome-extension/src/modules/downloads/sagas/queue.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.default=void 0;var e=y(require(\"ramda\")),t=require(\"redux-saga\"),r=require(\"redux-saga/effects\"),n=c(require(\"uuid\")),l=require(\"../../../background/Parser\"),o=require(\"../action-creators\"),a=require(\"../action-types\"),i=require(\"../utils\"),u=require(\"./downloadChunk\"),d=c(require(\"./queue\"));function c(e){return e&&e.__esModule?e:{default:e}}function s(){if(\"function\"!=typeof WeakMap)return null;var e=new WeakMap;return s=function(){return e},e}function y(e){if(e&&e.__esModule)return e;if(null===e||\"object\"!=typeof e&&\"function\"!=typeof e)return{default:e};var t=s();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){var o=n?Object.getOwnPropertyDescriptor(e,l):null;o&&(o.get||o.set)?Object.defineProperty(r,l,o):r[l]=e[l]}return r.default=e,t&&t.set(e,r),r}const f=({blobBuilder:t,getSegmentURI:n,playlistId:l,segmentsCount:a,allDoneChannel:i})=>(function*({uri:d,index:c,key:s}){const y=yield(0,r.call)(u.downloadChunk,{getSegmentURI:n,key:s,chunkURI:d});t.add(c,y),yield(0,r.put)((0,o.downloadChange)({id:l,total:a,finished:t.count()})),e.equals(t.count(),a)&&(yield i.put({type:\"DONE\"}))});function*p(u){const{payload:{playlist:c,request:s}}=u,y=(0,i.BlobBuilder)();try{const u=n.default.v4(),g=(0,i.getURI)(s.url)(c.uri),{segments:h}=yield(0,r.call)(l.parsePlaylist,g);console.log(\"sdf\",g);const k=(0,i.getURI)(g);yield(0,r.put)((0,o.addDownload)({id:u,title:s.url,total:h.length,finished:0,created:Date.now()}));const D=yield(0,r.call)(t.channel),{watcher:O,addTaskChannel:b}=yield(0,d.default)(f({blobBuilder:y,getSegmentURI:k,playlistId:u,segmentsCount:h.length,allDoneChannel:D}),2),q=yield(0,r.fork)(O);for(yield(0,r.all)(h.map((e,t)=>(0,r.put)(b,{payload:{uri:e.uri,key:e.key,index:t}})));;){const{cancelDownload:t,allDone:n}=yield(0,r.race)({allDone:(0,r.take)(D),cancelDownload:(0,r.take)(a.REMOVE_DOWNLOAD)});if(!e.isNil(t)&&e.propEq(\"payload\",u,t))return void(yield(0,r.cancel)(q));if(n){yield(0,r.cancel)(q);const e=URL.createObjectURL(y.build());return yield(0,r.put)((0,o.downloadFinished)({id:u,link:e})),void(yield(0,r.put)((0,o.chromeDownload)({id:u,link:e})))}}}catch(p){console.error(p)}}function*g(){yield(0,r.takeEvery)(a.DOWNLOAD_PLAYLIST,p)}var h=g;exports.default=h;"},"sourceMaps":{"js":{"mappings":[{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":0}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":13}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":20}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":35}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":43}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":56}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":57}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":64}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":68}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":76}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":89}},{"source":"../modules/downloads/sagas/index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":91}},{"source":"../modules/downloads/sagas/index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":95}},{"source":"../modules/downloads/sagas/index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":97}},{"source":"../modules/downloads/sagas/index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":99}},{"source":"../modules/downloads/sagas/index.js","original":{"line":1,"column":0},"generated":{"line":1,"column":107}},{"source":"../modules/downloads/sagas/index.js","original":{"line":2,"column":0},"generated":{"line":1,"column":117}},{"source":"../modules/downloads/sagas/index.js","original":{"line":2,"column":0},"generated":{"line":1,"column":119}},{"source":"../modules/downloads/sagas/index.js","original":{"line":2,"column":0},"generated":{"line":1,"column":127}},{"source":"../modules/downloads/sagas/index.js","original":{"line":3,"column":0},"generated":{"line":1,"column":141}},{"source":"../modules/downloads/sagas/index.js","original":{"line":3,"column":0},"generated":{"line":1,"column":143}},{"source":"../modules/downloads/sagas/index.js","original":{"line":3,"column":0},"generated":{"line":1,"column":151}},{"source":"../modules/downloads/sagas/index.js","original":{"line":13,"column":0},"generated":{"line":1,"column":173}},{"source":"../modules/downloads/sagas/index.js","original":{"line":13,"column":0},"generated":{"line":1,"column":175}},{"source":"../modules/downloads/sagas/index.js","original":{"line":13,"column":0},"generated":{"line":1,"column":177}},{"source":"../modules/downloads/sagas/index.js","original":{"line":13,"column":0},"generated":{"line":1,"column":185}},{"source":"../modules/downloads/sagas/index.js","original":{"line":14,"column":0},"generated":{"line":1,"column":194}},{"source":"../modules/downloads/sagas/index.js","original":{"line":14,"column":0},"generated":{"line":1,"column":196}},{"source":"../modules/downloads/sagas/index.js","original":{"line":14,"column":0},"generated":{"line":1,"column":204}},{"source":"../modules/downloads/sagas/index.js","original":{"line":15,"column":0},"generated":{"line":1,"column":234}},{"source":"../modules/downloads/sagas/index.js","original":{"line":15,"column":0},"generated":{"line":1,"column":236}},{"source":"../modules/downloads/sagas/index.js","original":{"line":15,"column":0},"generated":{"line":1,"column":244}},{"source":"../modules/downloads/sagas/index.js","original":{"line":21,"column":0},"generated":{"line":1,"column":266}},{"source":"../modules/downloads/sagas/index.js","original":{"line":21,"column":0},"generated":{"line":1,"column":268}},{"source":"../modules/downloads/sagas/index.js","original":{"line":21,"column":0},"generated":{"line":1,"column":276}},{"source":"../modules/downloads/sagas/index.js","original":{"line":22,"column":0},"generated":{"line":1,"column":295}},{"source":"../modules/downloads/sagas/index.js","original":{"line":22,"column":0},"generated":{"line":1,"column":297}},{"source":"../modules/downloads/sagas/index.js","original":{"line":22,"column":0},"generated":{"line":1,"column":305}},{"source":"../modules/downloads/sagas/index.js","original":{"line":23,"column":0},"generated":{"line":1,"column":317}},{"source":"../modules/downloads/sagas/index.js","original":{"line":23,"column":0},"generated":{"line":1,"column":319}},{"source":"../modules/downloads/sagas/index.js","original":{"line":23,"column":0},"generated":{"line":1,"column":327}},{"source":"../modules/downloads/sagas/index.js","original":{"line":24,"column":0},"generated":{"line":1,"column":346}},{"source":"../modules/downloads/sagas/index.js","original":{"line":24,"column":0},"generated":{"line":1,"column":348}},{"source":"../modules/downloads/sagas/index.js","original":{"line":24,"column":0},"generated":{"line":1,"column":350}},{"source":"../modules/downloads/sagas/index.js","original":{"line":24,"column":0},"generated":{"line":1,"column":358}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":370}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":379}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":381}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":384}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":391}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":394}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":396}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":407}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":409}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":410}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":418}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":421}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":430}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":434}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":437}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":456}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":464}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":471}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":476}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":480}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":482}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":486}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":494}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":501}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":503}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":514}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":521}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":524}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":526}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":535}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":537}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":540}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":543}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":546}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":548}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":559}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":566}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":568}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":571}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":578}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":581}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":598}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":601}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":620}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":622}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":628}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":629}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":637}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":640}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":644}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":646}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":650}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":653}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":656}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":658}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":662}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":665}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":672}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":674}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":678}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":681}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":685}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":687}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":690}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":692}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":699}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":715}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":722}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":747}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":751}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":755}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":760}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":762}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":765}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":772}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":782}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":797}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":802}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":804}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":807}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":808}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":812}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":814}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":816}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":823}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":848}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":850}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":853}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":858}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":862}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":864}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":869}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":871}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":876}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":883}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":898}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":900}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":902}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":905}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":907}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":910}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":912}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":915}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":922}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":924}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":932}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":934}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":937}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":939}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":943}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":945}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":948}},{"source":"../modules/downloads/sagas/index.js","original":{"line":26,"column":0},"generated":{"line":1,"column":950}},{"source":"../modules/downloads/sagas/index.js","name":"segmentHandlerFactory","original":{"line":26,"column":6},"generated":{"line":1,"column":956}},{"source":"../modules/downloads/sagas/index.js","original":{"line":26,"column":30},"generated":{"line":1,"column":958}},{"source":"../modules/downloads/sagas/index.js","name":"blobBuilder","original":{"line":27,"column":2},"generated":{"line":1,"column":960}},{"source":"../modules/downloads/sagas/index.js","name":"blobBuilder","original":{"line":27,"column":2},"generated":{"line":1,"column":972}},{"source":"../modules/downloads/sagas/index.js","name":"getSegmentURI","original":{"line":28,"column":2},"generated":{"line":1,"column":974}},{"source":"../modules/downloads/sagas/index.js","name":"getSegmentURI","original":{"line":28,"column":2},"generated":{"line":1,"column":988}},{"source":"../modules/downloads/sagas/index.js","name":"playlistId","original":{"line":29,"column":2},"generated":{"line":1,"column":990}},{"source":"../modules/downloads/sagas/index.js","name":"playlistId","original":{"line":29,"column":2},"generated":{"line":1,"column":1001}},{"source":"../modules/downloads/sagas/index.js","name":"segmentsCount","original":{"line":30,"column":2},"generated":{"line":1,"column":1003}},{"source":"../modules/downloads/sagas/index.js","name":"segmentsCount","original":{"line":30,"column":2},"generated":{"line":1,"column":1017}},{"source":"../modules/downloads/sagas/index.js","name":"allDoneChannel","original":{"line":31,"column":2},"generated":{"line":1,"column":1019}},{"source":"../modules/downloads/sagas/index.js","name":"allDoneChannel","original":{"line":31,"column":2},"generated":{"line":1,"column":1034}},{"source":"../modules/downloads/sagas/index.js","original":{"line":33,"column":2},"generated":{"line":1,"column":1040}},{"source":"../modules/downloads/sagas/index.js","original":{"line":33,"column":27},"generated":{"line":1,"column":1051}},{"source":"../modules/downloads/sagas/index.js","name":"uri","original":{"line":33,"column":29},"generated":{"line":1,"column":1055}},{"source":"../modules/downloads/sagas/index.js","original":{"line":33,"column":27},"generated":{"line":1,"column":1057}},{"source":"../modules/downloads/sagas/index.js","name":"index","original":{"line":33,"column":34},"generated":{"line":1,"column":1063}},{"source":"../modules/downloads/sagas/index.js","original":{"line":33,"column":27},"generated":{"line":1,"column":1065}},{"source":"../modules/downloads/sagas/index.js","name":"key","original":{"line":33,"column":41},"generated":{"line":1,"column":1069}},{"source":"../modules/downloads/sagas/index.js","name":"blob","original":{"line":34,"column":10},"generated":{"line":1,"column":1073}},{"source":"../modules/downloads/sagas/index.js","name":"blob","original":{"line":34,"column":10},"generated":{"line":1,"column":1079}},{"source":"../modules/downloads/sagas/index.js","original":{"line":34,"column":23},"generated":{"line":1,"column":1087}},{"source":"../modules/downloads/sagas/index.js","name":"downloadChunk","original":{"line":34,"column":28},"generated":{"line":1,"column":1089}},{"source":"../modules/downloads/sagas/index.js","name":"downloadChunk","original":{"line":34,"column":28},"generated":{"line":1,"column":1091}},{"source":"../modules/downloads/sagas/index.js","name":"downloadChunk","original":{"line":34,"column":28},"generated":{"line":1,"column":1097}},{"source":"../modules/downloads/sagas/index.js","original":{"line":34,"column":23},"generated":{"line":1,"column":1099}},{"source":"../modules/downloads/sagas/index.js","original":{"line":34,"column":43},"generated":{"line":1,"column":1113}},{"source":"../modules/downloads/sagas/index.js","name":"getSegmentURI","original":{"line":35,"column":6},"generated":{"line":1,"column":1114}},{"source":"../modules/downloads/sagas/index.js","name":"getSegmentURI","original":{"line":35,"column":6},"generated":{"line":1,"column":1128}},{"source":"../modules/downloads/sagas/index.js","name":"key","original":{"line":36,"column":6},"generated":{"line":1,"column":1130}},{"source":"../modules/downloads/sagas/index.js","name":"key","original":{"line":36,"column":6},"generated":{"line":1,"column":1134}},{"source":"../modules/downloads/sagas/index.js","name":"chunkURI","original":{"line":37,"column":6},"generated":{"line":1,"column":1136}},{"source":"../modules/downloads/sagas/index.js","name":"uri","original":{"line":37,"column":16},"generated":{"line":1,"column":1145}},{"source":"../modules/downloads/sagas/index.js","name":"blobBuilder","original":{"line":40,"column":4},"generated":{"line":1,"column":1149}},{"source":"../modules/downloads/sagas/index.js","name":"add","original":{"line":40,"column":16},"generated":{"line":1,"column":1151}},{"source":"../modules/downloads/sagas/index.js","name":"index","original":{"line":40,"column":20},"generated":{"line":1,"column":1155}},{"source":"../modules/downloads/sagas/index.js","name":"blob","original":{"line":40,"column":27},"generated":{"line":1,"column":1157}},{"source":"../modules/downloads/sagas/index.js","original":{"line":42,"column":10},"generated":{"line":1,"column":1166}},{"source":"../modules/downloads/sagas/index.js","original":{"line":43,"column":6},"generated":{"line":1,"column":1168}},{"source":"../modules/downloads/sagas/index.js","original":{"line":43,"column":6},"generated":{"line":1,"column":1170}},{"source":"../modules/downloads/sagas/index.js","original":{"line":43,"column":6},"generated":{"line":1,"column":1176}},{"source":"../modules/downloads/sagas/index.js","original":{"line":43,"column":21},"generated":{"line":1,"column":1178}},{"source":"../modules/downloads/sagas/index.js","original":{"line":43,"column":21},"generated":{"line":1,"column":1180}},{"source":"../modules/downloads/sagas/index.js","original":{"line":43,"column":21},"generated":{"line":1,"column":1196}},{"source":"../modules/downloads/sagas/index.js","name":"id","original":{"line":44,"column":8},"generated":{"line":1,"column":1197}},{"source":"../modules/downloads/sagas/index.js","name":"playlistId","original":{"line":44,"column":12},"generated":{"line":1,"column":1200}},{"source":"../modules/downloads/sagas/index.js","name":"total","original":{"line":45,"column":8},"generated":{"line":1,"column":1202}},{"source":"../modules/downloads/sagas/index.js","name":"segmentsCount","original":{"line":45,"column":15},"generated":{"line":1,"column":1208}},{"source":"../modules/downloads/sagas/index.js","name":"finished","original":{"line":46,"column":8},"generated":{"line":1,"column":1210}},{"source":"../modules/downloads/sagas/index.js","name":"blobBuilder","original":{"line":46,"column":18},"generated":{"line":1,"column":1219}},{"source":"../modules/downloads/sagas/index.js","name":"count","original":{"line":46,"column":30},"generated":{"line":1,"column":1221}},{"source":"../modules/downloads/sagas/index.js","name":"R","original":{"line":49,"column":8},"generated":{"line":1,"column":1232}},{"source":"../modules/downloads/sagas/index.js","name":"equals","original":{"line":49,"column":10},"generated":{"line":1,"column":1234}},{"source":"../modules/downloads/sagas/index.js","name":"blobBuilder","original":{"line":49,"column":17},"generated":{"line":1,"column":1241}},{"source":"../modules/downloads/sagas/index.js","name":"count","original":{"line":49,"column":29},"generated":{"line":1,"column":1243}},{"source":"../modules/downloads/sagas/index.js","name":"segmentsCount","original":{"line":49,"column":38},"generated":{"line":1,"column":1251}},{"source":"../modules/downloads/sagas/index.js","name":"allDoneChannel","original":{"line":50,"column":12},"generated":{"line":1,"column":1262}},{"source":"../modules/downloads/sagas/index.js","name":"put","original":{"line":50,"column":27},"generated":{"line":1,"column":1264}},{"source":"../modules/downloads/sagas/index.js","original":{"line":50,"column":31},"generated":{"line":1,"column":1268}},{"source":"../modules/downloads/sagas/index.js","name":"type","original":{"line":50,"column":33},"generated":{"line":1,"column":1269}},{"source":"../modules/downloads/sagas/index.js","original":{"line":50,"column":39},"generated":{"line":1,"column":1274}},{"source":"../modules/downloads/sagas/index.js","original":{"line":54,"column":0},"generated":{"line":1,"column":1286}},{"source":"../modules/downloads/sagas/index.js","name":"downloadPlaylist","original":{"line":54,"column":10},"generated":{"line":1,"column":1295}},{"source":"../modules/downloads/sagas/index.js","name":"action","original":{"line":54,"column":27},"generated":{"line":1,"column":1297}},{"source":"../modules/downloads/sagas/index.js","name":"QUEUE_CONCURRENT","original":{"line":55,"column":8},"generated":{"line":1,"column":1300}},{"source":"../modules/downloads/sagas/index.js","name":"payload","original":{"line":58,"column":4},"generated":{"line":1,"column":1306}},{"source":"../modules/downloads/sagas/index.js","original":{"line":58,"column":13},"generated":{"line":1,"column":1315}},{"source":"../modules/downloads/sagas/index.js","name":"playlist","original":{"line":58,"column":15},"generated":{"line":1,"column":1324}},{"source":"../modules/downloads/sagas/index.js","original":{"line":58,"column":13},"generated":{"line":1,"column":1326}},{"source":"../modules/downloads/sagas/index.js","name":"request","original":{"line":58,"column":25},"generated":{"line":1,"column":1334}},{"source":"../modules/downloads/sagas/index.js","name":"action","original":{"line":59,"column":6},"generated":{"line":1,"column":1338}},{"source":"../modules/downloads/sagas/index.js","name":"blobBuilder","original":{"line":60,"column":8},"generated":{"line":1,"column":1340}},{"source":"../modules/downloads/sagas/index.js","original":{"line":60,"column":22},"generated":{"line":1,"column":1343}},{"source":"../modules/downloads/sagas/index.js","original":{"line":60,"column":2},"generated":{"line":1,"column":1345}},{"source":"../modules/downloads/sagas/index.js","original":{"line":60,"column":2},"generated":{"line":1,"column":1347}},{"source":"../modules/downloads/sagas/index.js","original":{"line":61,"column":6},"generated":{"line":1,"column":1362}},{"source":"../modules/downloads/sagas/index.js","name":"id","original":{"line":62,"column":10},"generated":{"line":1,"column":1366}},{"source":"../modules/downloads/sagas/index.js","name":"id","original":{"line":62,"column":10},"generated":{"line":1,"column":1372}},{"source":"../modules/downloads/sagas/index.js","name":"uuid","original":{"line":62,"column":15},"generated":{"line":1,"column":1374}},{"source":"../modules/downloads/sagas/index.js","name":"v4","original":{"line":62,"column":20},"generated":{"line":1,"column":1376}},{"source":"../modules/downloads/sagas/index.js","name":"v4","original":{"line":62,"column":20},"generated":{"line":1,"column":1384}},{"source":"../modules/downloads/sagas/index.js","name":"uri","original":{"line":63,"column":10},"generated":{"line":1,"column":1389}},{"source":"../modules/downloads/sagas/index.js","original":{"line":63,"column":16},"generated":{"line":1,"column":1392}},{"source":"../modules/downloads/sagas/index.js","name":"request","original":{"line":63,"column":23},"generated":{"line":1,"column":1394}},{"source":"../modules/downloads/sagas/index.js","name":"request","original":{"line":63,"column":23},"generated":{"line":1,"column":1396}},{"source":"../modules/downloads/sagas/index.js","name":"request","original":{"line":63,"column":23},"generated":{"line":1,"column":1404}},{"source":"../modules/downloads/sagas/index.js","name":"url","original":{"line":63,"column":31},"generated":{"line":1,"column":1406}},{"source":"../modules/downloads/sagas/index.js","original":{"line":63,"column":16},"generated":{"line":1,"column":1410}},{"source":"../modules/downloads/sagas/index.js","name":"playlist","original":{"line":63,"column":36},"generated":{"line":1,"column":1411}},{"source":"../modules/downloads/sagas/index.js","name":"uri","original":{"line":63,"column":45},"generated":{"line":1,"column":1413}},{"source":"../modules/downloads/sagas/index.js","original":{"line":64,"column":10},"generated":{"line":1,"column":1419}},{"source":"../modules/downloads/sagas/index.js","name":"segments","original":{"line":64,"column":12},"generated":{"line":1,"column":1428}},{"source":"../modules/downloads/sagas/index.js","original":{"line":64,"column":31},"generated":{"line":1,"column":1437}},{"source":"../modules/downloads/sagas/index.js","name":"parsePlaylist","original":{"line":64,"column":36},"generated":{"line":1,"column":1439}},{"source":"../modules/downloads/sagas/index.js","name":"parsePlaylist","original":{"line":64,"column":36},"generated":{"line":1,"column":1441}},{"source":"../modules/downloads/sagas/index.js","name":"parsePlaylist","original":{"line":64,"column":36},"generated":{"line":1,"column":1447}},{"source":"../modules/downloads/sagas/index.js","original":{"line":64,"column":31},"generated":{"line":1,"column":1449}},{"source":"../modules/downloads/sagas/index.js","name":"uri","original":{"line":64,"column":51},"generated":{"line":1,"column":1463}},{"source":"../modules/downloads/sagas/index.js","name":"console","original":{"line":65,"column":4},"generated":{"line":1,"column":1466}},{"source":"../modules/downloads/sagas/index.js","name":"log","original":{"line":65,"column":12},"generated":{"line":1,"column":1474}},{"source":"../modules/downloads/sagas/index.js","original":{"line":65,"column":16},"generated":{"line":1,"column":1478}},{"source":"../modules/downloads/sagas/index.js","name":"uri","original":{"line":65,"column":22},"generated":{"line":1,"column":1484}},{"source":"../modules/downloads/sagas/index.js","name":"getSegmentURI","original":{"line":66,"column":10},"generated":{"line":1,"column":1487}},{"source":"../modules/downloads/sagas/index.js","name":"getSegmentURI","original":{"line":66,"column":10},"generated":{"line":1,"column":1493}},{"source":"../modules/downloads/sagas/index.js","original":{"line":66,"column":26},"generated":{"line":1,"column":1496}},{"source":"../modules/downloads/sagas/index.js","name":"uri","original":{"line":66,"column":33},"generated":{"line":1,"column":1498}},{"source":"../modules/downloads/sagas/index.js","name":"uri","original":{"line":66,"column":33},"generated":{"line":1,"column":1500}},{"source":"../modules/downloads/sagas/index.js","name":"uri","original":{"line":66,"column":33},"generated":{"line":1,"column":1508}},{"source":"../modules/downloads/sagas/index.js","original":{"line":68,"column":10},"generated":{"line":1,"column":1517}},{"source":"../modules/downloads/sagas/index.js","original":{"line":69,"column":6},"generated":{"line":1,"column":1519}},{"source":"../modules/downloads/sagas/index.js","original":{"line":69,"column":6},"generated":{"line":1,"column":1521}},{"source":"../modules/downloads/sagas/index.js","original":{"line":69,"column":6},"generated":{"line":1,"column":1527}},{"source":"../modules/downloads/sagas/index.js","original":{"line":69,"column":18},"generated":{"line":1,"column":1529}},{"source":"../modules/downloads/sagas/index.js","original":{"line":69,"column":18},"generated":{"line":1,"column":1531}},{"source":"../modules/downloads/sagas/index.js","original":{"line":69,"column":18},"generated":{"line":1,"column":1544}},{"source":"../modules/downloads/sagas/index.js","name":"id","original":{"line":70,"column":8},"generated":{"line":1,"column":1545}},{"source":"../modules/downloads/sagas/index.js","name":"id","original":{"line":70,"column":8},"generated":{"line":1,"column":1548}},{"source":"../modules/downloads/sagas/index.js","name":"title","original":{"line":71,"column":8},"generated":{"line":1,"column":1550}},{"source":"../modules/downloads/sagas/index.js","name":"request","original":{"line":71,"column":15},"generated":{"line":1,"column":1556}},{"source":"../modules/downloads/sagas/index.js","name":"url","original":{"line":71,"column":23},"generated":{"line":1,"column":1558}},{"source":"../modules/downloads/sagas/index.js","name":"total","original":{"line":72,"column":8},"generated":{"line":1,"column":1562}},{"source":"../modules/downloads/sagas/index.js","name":"segments","original":{"line":72,"column":15},"generated":{"line":1,"column":1568}},{"source":"../modules/downloads/sagas/index.js","name":"length","original":{"line":72,"column":24},"generated":{"line":1,"column":1570}},{"source":"../modules/downloads/sagas/index.js","name":"finished","original":{"line":73,"column":8},"generated":{"line":1,"column":1577}},{"source":"../modules/downloads/sagas/index.js","original":{"line":73,"column":18},"generated":{"line":1,"column":1586}},{"source":"../modules/downloads/sagas/index.js","name":"created","original":{"line":74,"column":8},"generated":{"line":1,"column":1588}},{"source":"../modules/downloads/sagas/index.js","name":"Date","original":{"line":74,"column":17},"generated":{"line":1,"column":1596}},{"source":"../modules/downloads/sagas/index.js","name":"now","original":{"line":74,"column":22},"generated":{"line":1,"column":1601}},{"source":"../modules/downloads/sagas/index.js","name":"allDoneChannel","original":{"line":78,"column":10},"generated":{"line":1,"column":1610}},{"source":"../modules/downloads/sagas/index.js","name":"allDoneChannel","original":{"line":78,"column":10},"generated":{"line":1,"column":1616}},{"source":"../modules/downloads/sagas/index.js","original":{"line":78,"column":33},"generated":{"line":1,"column":1624}},{"source":"../modules/downloads/sagas/index.js","name":"channel","original":{"line":78,"column":38},"generated":{"line":1,"column":1626}},{"source":"../modules/downloads/sagas/index.js","name":"channel","original":{"line":78,"column":38},"generated":{"line":1,"column":1628}},{"source":"../modules/downloads/sagas/index.js","name":"channel","original":{"line":78,"column":38},"generated":{"line":1,"column":1634}},{"source":"../modules/downloads/sagas/index.js","original":{"line":78,"column":33},"generated":{"line":1,"column":1636}},{"source":"../modules/downloads/sagas/index.js","original":{"line":80,"column":10},"generated":{"line":1,"column":1646}},{"source":"../modules/downloads/sagas/index.js","name":"watcher","original":{"line":80,"column":12},"generated":{"line":1,"column":1654}},{"source":"../modules/downloads/sagas/index.js","original":{"line":80,"column":10},"generated":{"line":1,"column":1656}},{"source":"../modules/downloads/sagas/index.js","name":"addTaskChannel","original":{"line":80,"column":21},"generated":{"line":1,"column":1671}},{"source":"../modules/downloads/sagas/index.js","original":{"line":80,"column":46},"generated":{"line":1,"column":1680}},{"source":"../modules/downloads/sagas/index.js","name":"segmentHandlerFactory","original":{"line":81,"column":6},"generated":{"line":1,"column":1682}},{"source":"../modules/downloads/sagas/index.js","name":"segmentHandlerFactory","original":{"line":81,"column":6},"generated":{"line":1,"column":1684}},{"source":"../modules/downloads/sagas/index.js","name":"segmentHandlerFactory","original":{"line":81,"column":6},"generated":{"line":1,"column":1693}},{"source":"../modules/downloads/sagas/index.js","original":{"line":81,"column":28},"generated":{"line":1,"column":1695}},{"source":"../modules/downloads/sagas/index.js","name":"blobBuilder","original":{"line":82,"column":8},"generated":{"line":1,"column":1696}},{"source":"../modules/downloads/sagas/index.js","name":"blobBuilder","original":{"line":82,"column":8},"generated":{"line":1,"column":1708}},{"source":"../modules/downloads/sagas/index.js","name":"getSegmentURI","original":{"line":83,"column":8},"generated":{"line":1,"column":1710}},{"source":"../modules/downloads/sagas/index.js","name":"getSegmentURI","original":{"line":83,"column":8},"generated":{"line":1,"column":1724}},{"source":"../modules/downloads/sagas/index.js","name":"playlistId","original":{"line":84,"column":8},"generated":{"line":1,"column":1726}},{"source":"../modules/downloads/sagas/index.js","name":"id","original":{"line":84,"column":20},"generated":{"line":1,"column":1737}},{"source":"../modules/downloads/sagas/index.js","name":"segmentsCount","original":{"line":85,"column":8},"generated":{"line":1,"column":1739}},{"source":"../modules/downloads/sagas/index.js","name":"segments","original":{"line":85,"column":23},"generated":{"line":1,"column":1753}},{"source":"../modules/downloads/sagas/index.js","name":"length","original":{"line":85,"column":32},"generated":{"line":1,"column":1755}},{"source":"../modules/downloads/sagas/index.js","name":"allDoneChannel","original":{"line":86,"column":8},"generated":{"line":1,"column":1762}},{"source":"../modules/downloads/sagas/index.js","name":"allDoneChannel","original":{"line":86,"column":8},"generated":{"line":1,"column":1777}},{"source":"../modules/downloads/sagas/index.js","original":{"line":55,"column":27},"generated":{"line":1,"column":1781}},{"source":"../modules/downloads/sagas/index.js","name":"watcherTask","original":{"line":90,"column":10},"generated":{"line":1,"column":1784}},{"source":"../modules/downloads/sagas/index.js","original":{"line":90,"column":30},"generated":{"line":1,"column":1792}},{"source":"../modules/downloads/sagas/index.js","name":"watcher","original":{"line":90,"column":35},"generated":{"line":1,"column":1794}},{"source":"../modules/downloads/sagas/index.js","name":"watcher","original":{"line":90,"column":35},"generated":{"line":1,"column":1796}},{"source":"../modules/downloads/sagas/index.js","name":"watcher","original":{"line":90,"column":35},"generated":{"line":1,"column":1802}},{"source":"../modules/downloads/sagas/index.js","original":{"line":102,"column":11},"generated":{"line":1,"column":1805}},{"source":"../modules/downloads/sagas/index.js","original":{"line":91,"column":10},"generated":{"line":1,"column":1815}},{"source":"../modules/downloads/sagas/index.js","name":"segments","original":{"line":92,"column":6},"generated":{"line":1,"column":1817}},{"source":"../modules/downloads/sagas/index.js","name":"segments","original":{"line":92,"column":6},"generated":{"line":1,"column":1819}},{"source":"../modules/downloads/sagas/index.js","name":"segments","original":{"line":92,"column":6},"generated":{"line":1,"column":1824}},{"source":"../modules/downloads/sagas/index.js","name":"map","original":{"line":92,"column":15},"generated":{"line":1,"column":1826}},{"source":"../modules/downloads/sagas/index.js","original":{"line":92,"column":19},"generated":{"line":1,"column":1830}},{"source":"../modules/downloads/sagas/index.js","name":"segment","original":{"line":92,"column":20},"generated":{"line":1,"column":1831}},{"source":"../modules/downloads/sagas/index.js","name":"index","original":{"line":92,"column":29},"generated":{"line":1,"column":1833}},{"source":"../modules/downloads/sagas/index.js","original":{"line":93,"column":8},"generated":{"line":1,"column":1838}},{"source":"../modules/downloads/sagas/index.js","name":"addTaskChannel","original":{"line":93,"column":12},"generated":{"line":1,"column":1840}},{"source":"../modules/downloads/sagas/index.js","name":"addTaskChannel","original":{"line":93,"column":12},"generated":{"line":1,"column":1842}},{"source":"../modules/downloads/sagas/index.js","name":"addTaskChannel","original":{"line":93,"column":12},"generated":{"line":1,"column":1847}},{"source":"../modules/downloads/sagas/index.js","original":{"line":93,"column":28},"generated":{"line":1,"column":1849}},{"source":"../modules/downloads/sagas/index.js","name":"payload","original":{"line":94,"column":10},"generated":{"line":1,"column":1850}},{"source":"../modules/downloads/sagas/index.js","original":{"line":94,"column":19},"generated":{"line":1,"column":1858}},{"source":"../modules/downloads/sagas/index.js","name":"uri","original":{"line":95,"column":12},"generated":{"line":1,"column":1859}},{"source":"../modules/downloads/sagas/index.js","name":"segment","original":{"line":95,"column":17},"generated":{"line":1,"column":1863}},{"source":"../modules/downloads/sagas/index.js","name":"uri","original":{"line":95,"column":25},"generated":{"line":1,"column":1865}},{"source":"../modules/downloads/sagas/index.js","name":"key","original":{"line":96,"column":12},"generated":{"line":1,"column":1869}},{"source":"../modules/downloads/sagas/index.js","name":"segment","original":{"line":96,"column":17},"generated":{"line":1,"column":1873}},{"source":"../modules/downloads/sagas/index.js","name":"key","original":{"line":96,"column":25},"generated":{"line":1,"column":1875}},{"source":"../modules/downloads/sagas/index.js","name":"index","original":{"line":97,"column":12},"generated":{"line":1,"column":1879}},{"source":"../modules/downloads/sagas/index.js","name":"index","original":{"line":97,"column":12},"generated":{"line":1,"column":1885}},{"source":"../modules/downloads/sagas/index.js","original":{"line":102,"column":17},"generated":{"line":1,"column":1894}},{"source":"../modules/downloads/sagas/index.js","original":{"line":103,"column":12},"generated":{"line":1,"column":1895}},{"source":"../modules/downloads/sagas/index.js","original":{"line":103,"column":12},"generated":{"line":1,"column":1901}},{"source":"../modules/downloads/sagas/index.js","name":"cancelDownload","original":{"line":103,"column":14},"generated":{"line":1,"column":1916}},{"source":"../modules/downloads/sagas/index.js","original":{"line":103,"column":12},"generated":{"line":1,"column":1918}},{"source":"../modules/downloads/sagas/index.js","name":"allDone","original":{"line":103,"column":30},"generated":{"line":1,"column":1926}},{"source":"../modules/downloads/sagas/index.js","original":{"line":103,"column":48},"generated":{"line":1,"column":1935}},{"source":"../modules/downloads/sagas/index.js","original":{"line":103,"column":53},"generated":{"line":1,"column":1937}},{"source":"../modules/downloads/sagas/index.js","original":{"line":103,"column":53},"generated":{"line":1,"column":1939}},{"source":"../modules/downloads/sagas/index.js","original":{"line":103,"column":53},"generated":{"line":1,"column":1945}},{"source":"../modules/downloads/sagas/index.js","name":"allDone","original":{"line":104,"column":8},"generated":{"line":1,"column":1946}},{"source":"../modules/downloads/sagas/index.js","original":{"line":104,"column":17},"generated":{"line":1,"column":1955}},{"source":"../modules/downloads/sagas/index.js","name":"allDoneChannel","original":{"line":104,"column":22},"generated":{"line":1,"column":1957}},{"source":"../modules/downloads/sagas/index.js","name":"allDoneChannel","original":{"line":104,"column":22},"generated":{"line":1,"column":1959}},{"source":"../modules/downloads/sagas/index.js","name":"allDoneChannel","original":{"line":104,"column":22},"generated":{"line":1,"column":1965}},{"source":"../modules/downloads/sagas/index.js","name":"cancelDownload","original":{"line":105,"column":8},"generated":{"line":1,"column":1968}},{"source":"../modules/downloads/sagas/index.js","original":{"line":105,"column":24},"generated":{"line":1,"column":1984}},{"source":"../modules/downloads/sagas/index.js","name":"REMOVE_DOWNLOAD","original":{"line":105,"column":29},"generated":{"line":1,"column":1986}},{"source":"../modules/downloads/sagas/index.js","name":"REMOVE_DOWNLOAD","original":{"line":105,"column":29},"generated":{"line":1,"column":1988}},{"source":"../modules/downloads/sagas/index.js","name":"REMOVE_DOWNLOAD","original":{"line":105,"column":29},"generated":{"line":1,"column":1994}},{"source":"../modules/downloads/sagas/index.js","original":{"line":105,"column":24},"generated":{"line":1,"column":1996}},{"source":"../modules/downloads/sagas/index.js","original":{"line":108,"column":10},"generated":{"line":1,"column":2015}},{"source":"../modules/downloads/sagas/index.js","name":"R","original":{"line":108,"column":11},"generated":{"line":1,"column":2019}},{"source":"../modules/downloads/sagas/index.js","name":"isNil","original":{"line":108,"column":13},"generated":{"line":1,"column":2021}},{"source":"../modules/downloads/sagas/index.js","name":"cancelDownload","original":{"line":108,"column":19},"generated":{"line":1,"column":2027}},{"source":"../modules/downloads/sagas/index.js","name":"R","original":{"line":108,"column":38},"generated":{"line":1,"column":2031}},{"source":"../modules/downloads/sagas/index.js","name":"propEq","original":{"line":108,"column":40},"generated":{"line":1,"column":2033}},{"source":"../modules/downloads/sagas/index.js","original":{"line":108,"column":47},"generated":{"line":1,"column":2040}},{"source":"../modules/downloads/sagas/index.js","name":"id","original":{"line":108,"column":58},"generated":{"line":1,"column":2050}},{"source":"../modules/downloads/sagas/index.js","name":"cancelDownload","original":{"line":108,"column":62},"generated":{"line":1,"column":2052}},{"source":"../modules/downloads/sagas/index.js","original":{"line":110,"column":8},"generated":{"line":1,"column":2055}},{"source":"../modules/downloads/sagas/index.js","original":{"line":109,"column":14},"generated":{"line":1,"column":2073}},{"source":"../modules/downloads/sagas/index.js","name":"watcherTask","original":{"line":109,"column":21},"generated":{"line":1,"column":2075}},{"source":"../modules/downloads/sagas/index.js","name":"watcherTask","original":{"line":109,"column":21},"generated":{"line":1,"column":2077}},{"source":"../modules/downloads/sagas/index.js","name":"watcherTask","original":{"line":109,"column":21},"generated":{"line":1,"column":2085}},{"source":"../modules/downloads/sagas/index.js","name":"allDone","original":{"line":112,"column":10},"generated":{"line":1,"column":2089}},{"source":"../modules/downloads/sagas/index.js","name":"allDone","original":{"line":112,"column":10},"generated":{"line":1,"column":2092}},{"source":"../modules/downloads/sagas/index.js","original":{"line":112,"column":19},"generated":{"line":1,"column":2094}},{"source":"../modules/downloads/sagas/index.js","original":{"line":113,"column":14},"generated":{"line":1,"column":2101}},{"source":"../modules/downloads/sagas/index.js","name":"watcherTask","original":{"line":113,"column":21},"generated":{"line":1,"column":2103}},{"source":"../modules/downloads/sagas/index.js","name":"watcherTask","original":{"line":113,"column":21},"generated":{"line":1,"column":2105}},{"source":"../modules/downloads/sagas/index.js","name":"watcherTask","original":{"line":113,"column":21},"generated":{"line":1,"column":2113}},{"source":"../modules/downloads/sagas/index.js","name":"link","original":{"line":114,"column":14},"generated":{"line":1,"column":2116}},{"source":"../modules/downloads/sagas/index.js","name":"link","original":{"line":114,"column":14},"generated":{"line":1,"column":2122}},{"source":"../modules/downloads/sagas/index.js","name":"URL","original":{"line":114,"column":21},"generated":{"line":1,"column":2124}},{"source":"../modules/downloads/sagas/index.js","name":"createObjectURL","original":{"line":114,"column":25},"generated":{"line":1,"column":2128}},{"source":"../modules/downloads/sagas/index.js","name":"blobBuilder","original":{"line":114,"column":41},"generated":{"line":1,"column":2144}},{"source":"../modules/downloads/sagas/index.js","name":"build","original":{"line":114,"column":53},"generated":{"line":1,"column":2146}},{"source":"../modules/downloads/sagas/index.js","original":{"line":117,"column":8},"generated":{"line":1,"column":2155}},{"source":"../modules/downloads/sagas/index.js","original":{"line":115,"column":14},"generated":{"line":1,"column":2168}},{"source":"../modules/downloads/sagas/index.js","original":{"line":115,"column":18},"generated":{"line":1,"column":2170}},{"source":"../modules/downloads/sagas/index.js","original":{"line":115,"column":18},"generated":{"line":1,"column":2172}},{"source":"../modules/downloads/sagas/index.js","original":{"line":115,"column":18},"generated":{"line":1,"column":2178}},{"source":"../modules/downloads/sagas/index.js","original":{"line":115,"column":35},"generated":{"line":1,"column":2180}},{"source":"../modules/downloads/sagas/index.js","original":{"line":115,"column":35},"generated":{"line":1,"column":2182}},{"source":"../modules/downloads/sagas/index.js","original":{"line":115,"column":35},"generated":{"line":1,"column":2200}},{"source":"../modules/downloads/sagas/index.js","name":"id","original":{"line":115,"column":37},"generated":{"line":1,"column":2201}},{"source":"../modules/downloads/sagas/index.js","name":"id","original":{"line":115,"column":37},"generated":{"line":1,"column":2204}},{"source":"../modules/downloads/sagas/index.js","name":"link","original":{"line":115,"column":41},"generated":{"line":1,"column":2206}},{"source":"../modules/downloads/sagas/index.js","name":"link","original":{"line":115,"column":41},"generated":{"line":1,"column":2211}},{"source":"../modules/downloads/sagas/index.js","original":{"line":116,"column":14},"generated":{"line":1,"column":2227}},{"source":"../modules/downloads/sagas/index.js","original":{"line":116,"column":18},"generated":{"line":1,"column":2229}},{"source":"../modules/downloads/sagas/index.js","original":{"line":116,"column":18},"generated":{"line":1,"column":2231}},{"source":"../modules/downloads/sagas/index.js","original":{"line":116,"column":18},"generated":{"line":1,"column":2237}},{"source":"../modules/downloads/sagas/index.js","original":{"line":116,"column":33},"generated":{"line":1,"column":2239}},{"source":"../modules/downloads/sagas/index.js","original":{"line":116,"column":33},"generated":{"line":1,"column":2241}},{"source":"../modules/downloads/sagas/index.js","original":{"line":116,"column":33},"generated":{"line":1,"column":2257}},{"source":"../modules/downloads/sagas/index.js","name":"id","original":{"line":116,"column":35},"generated":{"line":1,"column":2258}},{"source":"../modules/downloads/sagas/index.js","name":"id","original":{"line":116,"column":35},"generated":{"line":1,"column":2261}},{"source":"../modules/downloads/sagas/index.js","name":"link","original":{"line":116,"column":39},"generated":{"line":1,"column":2263}},{"source":"../modules/downloads/sagas/index.js","name":"link","original":{"line":116,"column":39},"generated":{"line":1,"column":2268}},{"source":"../modules/downloads/sagas/index.js","original":{"line":120,"column":4},"generated":{"line":1,"column":2276}},{"source":"../modules/downloads/sagas/index.js","name":"e","original":{"line":120,"column":11},"generated":{"line":1,"column":2282}},{"source":"../modules/downloads/sagas/index.js","name":"console","original":{"line":121,"column":4},"generated":{"line":1,"column":2285}},{"source":"../modules/downloads/sagas/index.js","name":"error","original":{"line":121,"column":12},"generated":{"line":1,"column":2293}},{"source":"../modules/downloads/sagas/index.js","name":"e","original":{"line":121,"column":18},"generated":{"line":1,"column":2299}},{"source":"../modules/downloads/sagas/index.js","original":{"line":125,"column":0},"generated":{"line":1,"column":2303}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":125,"column":10},"generated":{"line":1,"column":2312}},{"source":"../modules/downloads/sagas/index.js","original":{"line":126,"column":8},"generated":{"line":1,"column":2322}},{"source":"../modules/downloads/sagas/index.js","name":"DOWNLOAD_PLAYLIST","original":{"line":126,"column":18},"generated":{"line":1,"column":2324}},{"source":"../modules/downloads/sagas/index.js","name":"DOWNLOAD_PLAYLIST","original":{"line":126,"column":18},"generated":{"line":1,"column":2326}},{"source":"../modules/downloads/sagas/index.js","name":"DOWNLOAD_PLAYLIST","original":{"line":126,"column":18},"generated":{"line":1,"column":2337}},{"source":"../modules/downloads/sagas/index.js","original":{"line":126,"column":8},"generated":{"line":1,"column":2339}},{"source":"../modules/downloads/sagas/index.js","name":"downloadPlaylist","original":{"line":126,"column":37},"generated":{"line":1,"column":2357}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":2360}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":2364}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":2366}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":2368}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":2376}},{"source":"../modules/downloads/sagas/index.js","name":"downloadsSaga","original":{"line":129,"column":15},"generated":{"line":1,"column":2384}}],"sources":{"../modules/downloads/sagas/index.js":"import * as R from \"ramda\";\nimport { channel } from \"redux-saga\";\nimport {\n  all,\n  call,\n  cancel,\n  fork,\n  put,\n  race,\n  take,\n  takeEvery\n} from \"redux-saga/effects\";\nimport uuid from \"uuid\";\nimport { parsePlaylist } from \"../../../background/Parser\";\nimport {\n  addDownload,\n  downloadChange,\n  downloadFinished,\n  chromeDownload\n} from \"../action-creators\";\nimport { DOWNLOAD_PLAYLIST, REMOVE_DOWNLOAD } from \"../action-types\";\nimport { BlobBuilder, getURI } from \"../utils\";\nimport { downloadChunk } from \"./downloadChunk\";\nimport createQueue from \"./queue\";\n\nconst segmentHandlerFactory = ({\n  blobBuilder,\n  getSegmentURI,\n  playlistId,\n  segmentsCount,\n  allDoneChannel\n}) =>\n  function* segmentHandler({ uri, index, key }) {\n    const blob = yield call(downloadChunk, {\n      getSegmentURI,\n      key,\n      chunkURI: uri\n    });\n\n    blobBuilder.add(index, blob);\n\n    yield put(\n      downloadChange({\n        id: playlistId,\n        total: segmentsCount,\n        finished: blobBuilder.count()\n      })\n    );\n    if (R.equals(blobBuilder.count(), segmentsCount)) {\n      yield allDoneChannel.put({ type: \"DONE\" });\n    }\n  };\n\nfunction* downloadPlaylist(action) {\n  const QUEUE_CONCURRENT = 2;\n\n  const {\n    payload: { playlist, request }\n  } = action;\n  const blobBuilder = BlobBuilder();\n  try {\n    const id = uuid.v4();\n    const uri = getURI(request.url)(playlist.uri);\n    const { segments } = yield call(parsePlaylist, uri);\n    console.log('sdf',uri)\n    const getSegmentURI = getURI(uri);\n\n    yield put(\n      addDownload({\n        id,\n        title: request.url,\n        total: segments.length,\n        finished: 0,\n        created: Date.now()\n      })\n    );\n\n    const allDoneChannel = yield call(channel);\n\n    const { watcher, addTaskChannel } = yield createQueue(\n      segmentHandlerFactory({\n        blobBuilder,\n        getSegmentURI,\n        playlistId: id,\n        segmentsCount: segments.length,\n        allDoneChannel\n      }),\n      QUEUE_CONCURRENT\n    );\n    const watcherTask = yield fork(watcher);\n    yield all(\n      segments.map((segment, index) =>\n        put(addTaskChannel, {\n          payload: {\n            uri: segment.uri,\n            key: segment.key,\n            index\n          }\n        })\n      )\n    );\n    while (true) {\n      const { cancelDownload, allDone } = yield race({\n        allDone: take(allDoneChannel),\n        cancelDownload: take(REMOVE_DOWNLOAD)\n      });\n\n      if (!R.isNil(cancelDownload) && R.propEq(\"payload\", id, cancelDownload)) {\n        yield cancel(watcherTask);\n        return;\n      }\n      if (allDone) {\n        yield cancel(watcherTask);\n        const link = URL.createObjectURL(blobBuilder.build());\n        yield put(downloadFinished({ id, link }));\n        yield put(chromeDownload({ id, link }));\n        return;\n      }\n    }\n  } catch (e) {\n    console.error(e);\n  }\n}\n\nfunction* downloadsSaga() {\n  yield takeEvery(DOWNLOAD_PLAYLIST, downloadPlaylist);\n}\n\nexport default downloadsSaga;\n"},"lineCount":null}},"error":null,"hash":"c244cd2757572b13b16fbef2a7e48824","cacheData":{"env":{}}}